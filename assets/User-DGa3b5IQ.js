import{j as e,i as v,w as z,P as k,Q as S,x as N,u as T,B as A,z as B,T as E,r as _,U as D,V as M,W as q,X as V,Y as Q,Z as G,_ as Y,$ as X,t as Z,a0 as H,a1 as J,a2 as K,C as ee,a3 as se}from"./index-BEn8Lh2d.js";import{h as re,w as F,B as te}from"./BreadCrumbs-ntrrtCrr.js";import{S as oe}from"./SectionTitle-3KsbxwS_.js";const ie="_container_ezw5g_1",ae="_message_ezw5g_11",x={container:ie,message:ae},ne="_menuContainer_gij54_1",ce="_menuItem_gij54_29",le="_active_gij54_75",L={menuContainer:ne,menuItem:ce,active:le},pe=({menuItems:s,activeTab:t,setActiveTab:r})=>e.jsx("div",{className:L.menuContainer,children:s.map(o=>e.jsx("div",{className:`${L.menuItem} ${o.id===t?L.active:""}`,onClick:()=>r(o.id),children:o.label},o.id))}),de=s=>s.profile.userProfile,R=s=>s.profile.isAuthorizedUser,_e=s=>s.profile.followers,ue=s=>s.profile.following,fe=s=>s.profile.favoritesRecipes,me="_recipeCard_zbyhy_1",he={recipeCard:me},O=({imgUrl:s,title:t})=>e.jsx("div",{className:he.recipeCard,children:e.jsx("img",{src:s,alt:t})}),xe="_recipeCardWrapper_aqgmv_1",ge="_flexPhotoWrapper_aqgmv_11",ve="_recipeTextWrapper_aqgmv_21",je="_recipeInstructions_aqgmv_31",be="_recipeTitle_aqgmv_53",we="_buttonWrapper_aqgmv_69",Ce="_recipeCardList_aqgmv_79",ye="_iconBtn_aqgmv_91",Ne="_icon_aqgmv_91",p={recipeCardWrapper:xe,flexPhotoWrapper:ge,recipeTextWrapper:ve,recipeInstructions:je,recipeTitle:be,buttonWrapper:we,recipeCardList:Ce,iconBtn:ye,icon:Ne},We=({data:s,tab:t})=>{const r=v(R),[o]=z(),[c]=k(),n=()=>{t==="recipe"?c(s._id):re(o,s._id,"delete")};return e.jsxs("li",{className:p.recipeCardWrapper,children:[e.jsxs("div",{className:p.flexPhotoWrapper,children:[e.jsx(O,{imgUrl:s.thumb,title:s.title}),e.jsxs("div",{className:p.recipeTextWrapper,children:[e.jsxs("h5",{className:p.recipeTitle,children:[" ",s.title," "]}),e.jsx("p",{className:p.recipeInstructions,children:s.instructions})]})]}),e.jsxs("div",{className:p.buttonWrapper,children:[e.jsx(S,{to:`/recipe/${s._id}`,children:e.jsx(N,{iconId:"icon-arrow-up-right",style:p.iconBtn,styleSVG:p.icon})}),r&&e.jsx(N,{iconId:"icon-trash",onClick:n,style:p.iconBtn,styleSVG:p.icon})]})]})},P=({data:s,tab:t})=>e.jsx("ul",{className:p.recipeCardList,children:s.map(r=>e.jsx(We,{data:r,tab:t},r._id))}),Ie="_cardWrapper_bt2lx_1",Le="_photoWrapper_bt2lx_15",Pe="_smallProfilePhoto_bt2lx_41",Ue="_followerData_bt2lx_51",Re="_name_bt2lx_61",Te="_descr_bt2lx_77",Fe="_followerCardList_bt2lx_91",Se="_iconBtn_bt2lx_99",Ae="_icon_bt2lx_99",Be="_recipesList_bt2lx_157",Ee="_recipeCard_bt2lx_167",d={cardWrapper:Ie,photoWrapper:Le,smallProfilePhoto:Pe,followerData:Ue,name:Re,descr:Te,followerCardList:Fe,iconBtn:Se,icon:Ae,recipesList:Be,recipeCard:Ee},Oe=({data:s,btnText:t})=>{var c;const r=T(768,!1,3),o=T(1440,3,4);return e.jsxs("li",{className:d.cardWrapper,children:[e.jsxs("div",{className:d.followerData,children:[e.jsx("div",{className:d.photoWrapper,children:e.jsx("img",{src:s.avatarURL||"https://gravatar.com/avatar/000000000000000000000000000000000000000000000000000000?d=mp",className:d.smallProfilePhoto,alt:"User avatar"})}),e.jsxs("div",{children:[e.jsxs("h5",{className:d.name,children:[" ",s.name]}),e.jsxs("p",{className:d.descr,children:["Own recipes: ",s.length]}),e.jsx(A,{text:t,variant:"follow_user"})]})]}),r&&e.jsx("ul",{className:d.recipesList,children:(c=s==null?void 0:s.recipes)==null?void 0:c.map((n,i)=>{if(i<o)return e.jsx("li",{children:e.jsx(O,{imgUrl:n.thumb,title:n.title})},n._id)})}),e.jsx(S,{to:`/user/${s._id}`,children:e.jsx(N,{iconId:"icon-arrow-up-right",style:d.iconBtn,styleSVG:d.icon})})]})},U=({data:s,btnText:t})=>e.jsx("ul",{className:d.followerCardList,children:s.map(r=>e.jsx(Oe,{data:r,btnText:t},r._id))}),g=[{id:"my-recipes",label:"MY RECIPES",message:"Nothing has been added to your recipes list yet. Please browse our recipes and add your favorites for easy access in the future."},{id:"my-favorites",label:"MY FAVORITES",message:"Nothing has been added to your favorite recipes list yet. Please browse our recipes and add your favorites for easy access in the future."},{id:"followers",label:"FOLLOWERS",message:"There are currently no followers on your account. Please engage our visitors with interesting content and draw their attention to your profile."},{id:"following",label:"FOLLOWING",message:"Your account currently has no subscriptions to other users. Learn more about our users and select those whose content interests you."}],C=[{id:"recipes",label:"RECIPES",message:"The current user hasn't added any recipes yet."},{id:"followers",label:"FOLLOWERS",message:"The current user hasn't any followers yet."}],$e=()=>{const{id:s}=B(),t=E(),r=v(R),o=v(_e),c=v(ue),n=v(fe),[i,y]=_.useState(r?g[0].id:C[0].id);_.useEffect(()=>{y(r?g[0].id:C[0].id)},[r]);const{data:l}=D(s),{data:f}=M({userId:s},{skip:i!=="my-favorites"}),{data:j}=q({userId:s},{skip:i!=="followers"}),{data:w}=V({userId:s},{skip:i!=="following"});_.useEffect(()=>{if(i==="followers"&&j)t(Q(j.followersWithRecipes));else if(i==="following"&&w)t(G(w.followingWithRecipes));else if(i==="my-favorites"&&f){const W=f==null?void 0:f.data.map(I=>I.recipe);t(Y({data:W}))}},[i,t,j,w,f]);const a=(W,I)=>W.find(({id:$})=>$===I).message,m=()=>{if(r)switch(i){case"my-recipes":return(l==null?void 0:l.total)>0?e.jsx(P,{data:l.data,tab:"recipe"}):e.jsx("p",{className:x.message,children:a(g,i)});case"my-favorites":return(n==null?void 0:n.length)>0?e.jsx(P,{data:n,tab:"favorites"}):e.jsx("p",{className:x.message,children:a(g,i)});case"followers":return(o==null?void 0:o.length)>0?e.jsx(U,{data:o,btnText:"follow"}):e.jsx("p",{className:x.message,children:a(g,i)});case"following":return(c==null?void 0:c.length)>0?e.jsx(U,{data:c,btnText:"following"}):e.jsx("p",{className:x.message,children:a(g,i)});default:return null}else switch(i){case"recipes":return(l==null?void 0:l.length)>0?e.jsx(P,{data:l}):e.jsx("p",{className:x.message,children:a(C,i)});case"followers":return(o==null?void 0:o.length)>0?e.jsx(U,{data:o}):e.jsx("p",{className:x.message,children:a(C,i)});default:return null}},h=r?g:C;return e.jsxs("div",{className:x.container,children:[e.jsx(pe,{menuItems:h,activeTab:i,setActiveTab:y}),e.jsx("div",{className:x.content,children:m()})]})},ze="_container_1ivx6_1",ke="_breadscrumbs_1ivx6_9",De="_title_1ivx6_17",Me="_subtitle_1ivx6_23",qe="_userInfoAndBtnWrapper_1ivx6_41",Ve="_userInfoAndTabContentWerapper_1ivx6_111",b={container:ze,breadscrumbs:ke,title:De,subtitle:Me,userInfoAndBtnWrapper:qe,userInfoAndTabContentWerapper:Ve},Qe="_profile_card_wrapper_hmtns_1",Ge="_profile_card_hmtns_1",Ye="_profile_name_hmtns_41",Xe="_profile_card_info_hmtns_59",Ze="_profile_info_item_hmtns_73",He="_profile_info_content_hmtns_93",Je="_profile_big_card_button_hmtns_109",Ke="_profile_big_card_icon_hmtns_127",es="_profile_photo_hmtns_135",u={profile_card_wrapper:Qe,profile_card:Ge,profile_name:Ye,profile_card_info:Xe,profile_info_item:Ze,profile_info_content:He,profile_big_card_button:Je,profile_big_card_icon:Ke,profile_photo:es},ss=s=>s.charAt(0).toUpperCase()+s.slice(1),rs=({name:s,value:t})=>{const r={email:"email",createdRecipesCount:"added recipes",favoriteRecipesCount:"favorites",followersCount:"followers",followingCount:"following"};return e.jsxs("li",{className:u.profile_info_item,children:[ss(r[s]),":",e.jsx("span",{className:u.profile_info_content,children:t})]})},ts=()=>{const s=v(R),[t]=X(),r=v(de),o=r?Object.keys(r):[],[c,n]=_.useState((r==null?void 0:r.avatar)||F),i=async a=>{const m=new FormData;m.append("avatar",a);try{const h=await t(m).unwrap();n(h.avatarURL)}catch(h){console.error("Error updating avatar:",h)}},y=a=>{const m=a.target.files[0];if(m){const h=new FileReader;h.onload=()=>{i(m)},h.readAsDataURL(m)}},l=_.useRef(null),[f,j]=_.useState({width:16,height:16}),w=()=>{l.current.click()};return _.useEffect(()=>{n((r==null?void 0:r.avatar)||F)},[r==null?void 0:r.avatar]),_.useEffect(()=>{const a=()=>{window.matchMedia("(max-width: 768px)").matches?j({width:16,height:16}):j({width:18,height:18})};return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[]),e.jsx("div",{className:u.profile_card_wrapper,children:e.jsxs("div",{className:u.profile_card,children:[e.jsx("img",{className:u.profile_photo,src:c,alt:`${(r==null?void 0:r.name)||"User Name"} avatar`}),s&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"file",ref:l,style:{display:"none"},onChange:y}),e.jsx(N,{iconId:"icon-plus",style:u.profile_big_card_button,styleSVG:u.profile_big_card_icon,stroke:"#FFF",width:f.width,height:f.height,onClick:w})]}),e.jsx("h3",{className:u.profile_name,children:r==null?void 0:r.name}),e.jsx("ul",{className:u.profile_info,children:o.map(a=>{if(!(a==="_id"||a==="name"||a==="avatar"))return e.jsx(rs,{name:a,value:r[a]},Z())})})]})})},cs=()=>{const[s,t]=_.useState(!1),{id:r}=B(),o=E(),{data:c,error:n}=H(r);if(_.useEffect(()=>{c&&o(J(c))},[c,o]),n){K.error(n.data.message,{position:"top-right"});return}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:b.container,children:[e.jsx("div",{className:b.breadscrumbs,children:e.jsx(te,{currentPage:"Profile"})}),e.jsx("div",{className:b.title,children:e.jsx(oe,{text:"Profile"})}),e.jsxs("p",{className:b.subtitle,children:["Reveal your culinary art, share your favorite recipe and create ",e.jsx("br",{}),"gastronomic masterpieces with us."]}),e.jsxs("div",{className:b.userInfoAndTabContentWerapper,children:[e.jsxs("div",{className:b.userInfoAndBtnWrapper,children:[e.jsx(ts,{}),e.jsx(A,{type:"button",variant:"logOutBtn",text:"Log Out",onClick:()=>t(!0)})]}),e.jsx($e,{})]})]}),e.jsx(ee,{isOpen:s,onClose:()=>t(!1),children:e.jsx(se,{setModalLogOutOpen:t})})]})};export{cs as default};
