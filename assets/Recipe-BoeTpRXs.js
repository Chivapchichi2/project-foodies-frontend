import{q as H,j as e,t as f,v as Q,i as v,r,s as B,w as M,x as P,B as S,C as T,n as U,l as D,o as F,y as R,I as z,z as K,L as A,A as X,D as Z}from"./index-Dp6vxA_F.js";import{w as E,B as J}from"./BreadCrumbs-CjKum5Ig.js";const w=async(i,s,t,n)=>{try{await i(s).unwrap(),H.success(`Recipe ${t==="add"?"added to":"deleted from"} favorites!`),n(t==="add")}catch(_){console.error("Failed to add recipe to favorites: ",_)}},V="_recipe_info_container_1a2kn_1",Y="_recipe_info_wrapper_1a2kn_3",ee="_recipe_img_1a2kn_21",C={recipe_info_container:V,recipe_info_wrapper:Y,recipe_img:ee},se="_ingredients_item_w1ukj_1",ie="_ingredients_img_w1ukj_15",te="_ingredients_info_w1ukj_33",ne="_ingredients_mesure_w1ukj_49",re="_ingredients_list_w1ukj_57",ae="_ingredients_subtitel_w1ukj_77",d={ingredients_item:se,ingredients_img:ie,ingredients_info:te,ingredients_mesure:ne,ingredients_list:re,ingredients_subtitel:ae},ce="/project-foodies-frontend/assets/ingredient_without_img-DgeLwZWu.jpg",oe=({pathImg:i,name:s,mesure:t})=>e.jsxs("li",{className:d.ingredients_item,children:[e.jsx("img",{className:d.ingredients_img,src:i||ce,alt:`${s} image`}),e.jsxs("div",{className:d.ingredients_info,children:[e.jsx("p",{children:s}),e.jsx("p",{className:d.ingredients_mesure,children:t})]})]}),_e=({ingredients:i})=>e.jsx("ul",{className:d.ingredients_list,children:i.map(({ingredient:s,mesure:t})=>e.jsx(oe,{pathImg:s.img,name:s.name,mesure:t},s._id))}),pe=({ingredients:i})=>e.jsxs("div",{children:[e.jsx("h3",{className:d.ingredients_subtitel,children:"Ingredients"}),e.jsx(_e,{ingredients:i})]}),le="_owner_card_1lkyf_1",de="_owner_photo_1lkyf_11",me="_owner_sign_1lkyf_23",ue="_owner_primary_info_wrapper_1lkyf_35",ge="_profile_big_card_icon_1lkyf_53",x={owner_card:le,owner_photo:de,owner_sign:me,owner_primary_info_wrapper:ue,profile_big_card_icon:ge},he=({owner:i})=>{const{avatar:s,name:t,_id:n}=i;return e.jsxs(f,{to:`/user/${n}`,className:x.owner_card,children:[e.jsx("img",{className:x.owner_photo,src:s||E,alt:`${t} photo`}),e.jsxs("div",{className:x.owner_primary_info_wrapper,children:[e.jsx("span",{className:x.owner_sign,children:"Created by:"}),e.jsx("h4",{children:t})]})]})},je="_tags_list_13jcq_1",xe="_tag_list_item_13jcq_13",q={tags_list:je,tag_list_item:xe},fe=({tagInfo:i})=>e.jsx("li",{className:q.tag_list_item,children:Number(i)?`${i} min`:i}),ve=({tags:i})=>{const s=Object.keys(i);return e.jsx("ul",{className:q.tags_list,children:s.map(t=>e.jsx(fe,{tagInfo:i[t]},Q()))})},we="_recipe_main_info_wrapper_1uv7g_1",Ne="_recipe_header_1uv7g_15",Ie="_recipe_description_1uv7g_27",$={recipe_main_info_wrapper:we,recipe_header:Ne,recipe_description:Ie},ke=({data:i})=>{const{area:s,category:t,time:n,title:_,description:c,owner:o}=i;return e.jsxs("div",{className:$.recipe_main_info_wrapper,children:[e.jsx("h3",{className:$.recipe_header,children:_}),e.jsx(ve,{tags:{area:s,category:t,time:n}}),e.jsx("p",{className:$.recipe_description,children:c}),e.jsx(he,{owner:o})]})},ye=i=>i.split(`\r
`).filter(s=>s.trim()!=="").map(s=>`<p>${s}</p><br>`).join(""),be="_recipe_preparation_1hfuv_1",Se="_instruction_1hfuv_19",W={recipe_preparation:be,instruction:Se},Re=({instruction:i})=>e.jsxs("div",{children:[e.jsx("h4",{className:W.recipe_preparation,children:"Recipe Preparation"}),e.jsx("div",{className:W.instruction,dangerouslySetInnerHTML:{__html:ye(i)}})]}),Ce="/project-foodies-frontend/assets/recipe_without_img-Bp4tHiOX.jpg",G=i=>i.favoriteRecipes.favorites,$e=({recipe:i})=>{const{thumb:s,title:t,instructions:n,ingredients:_,_id:c}=i,o=v(G),[j,p]=r.useState(o.includes(c)),N=v(B),[l,m]=r.useState(!1),[u,I]=r.useState(!0),[g,k]=r.useState(!1),[y]=M(),[b]=P();r.useEffect(()=>{p(o.includes(c))},[o,c]);const h=()=>{k(!g),I(!u)};return e.jsxs("section",{className:C.recipe_info_container,children:[e.jsx("img",{className:C.recipe_img,src:s||Ce,alt:t}),e.jsxs("div",{className:C.recipe_info_wrapper,children:[e.jsx(ke,{data:i}),e.jsx(pe,{ingredients:_}),e.jsx(Re,{instruction:n}),N?j?e.jsx(S,{text:"Remove from favorites",variant:"add_favorite",onClick:()=>w(b,c,"delete",p)}):e.jsx(S,{text:"Add to favorites",variant:"add_favorite",onClick:()=>w(y,c,"add",p)}):e.jsx(S,{text:"Add to favorites",variant:"add_favorite",onClick:()=>{m(!l)}})]}),e.jsxs(T,{isOpen:l,onClose:()=>m(!l),children:[g&&e.jsx(U,{handleClickSignIn:h}),u&&e.jsx(D,{handleClickSignUp:h})]})]})},Fe="_header_popular_recipes_cshxa_1",Oe="_popular_recipes_container_cshxa_17",Le="_popular_recipes_list_cshxa_33",O={header_popular_recipes:Fe,popular_recipes_container:Oe,popular_recipes_list:Le},We="_recipeImage_hfeb7_1",Be="_textWrap_hfeb7_17",Me="_recipeDescription_hfeb7_25",Pe="_avatarBtnswrap_hfeb7_45",Te="_avatarWrapper_hfeb7_53",Ue="_avatar_hfeb7_45",De="_iconWrapper_hfeb7_73",Ae="_iconList_hfeb7_111",Ee="_recipeCard_hfeb7_125",qe="_header_card_hfeb7_133",a={recipeImage:We,textWrap:Be,recipeDescription:Me,avatarBtnswrap:Pe,avatarWrapper:Te,avatar:Ue,iconWrapper:De,iconList:Ae,recipeCard:Ee,header_card:qe},Ge="_section_subtitle_w8jh6_1",He={section_subtitle:Ge},Qe=({text:i,customStyle:s})=>e.jsx("h3",{className:F(He.section_subtitle,s),children:i}),ze=({recipe:i})=>{const{_id:s,title:t,owner:n,description:_,thumb:c}=i,o=v(G),[j,p]=r.useState(o.includes(s)),N=v(B),[l,m]=r.useState(!1),[u,I]=r.useState(!0),[g,k]=r.useState(!1),[y]=M(),[b]=P();r.useEffect(()=>{p(o.includes(s))},[o,s]);const h=()=>{k(!g),I(!u)},L=()=>{j?w(b,s,"delete",p):w(y,s,"add",p)};return e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:F(a.recipeCard),children:[e.jsx(f,{to:`/recipe/${s}`,children:e.jsx("img",{src:c,alt:t,className:a.recipeImage})}),e.jsxs("div",{className:a.textWrap,children:[e.jsx(Qe,{customStyle:a.header_card,text:t}),e.jsx("p",{className:a.recipeDescription,children:_})]}),e.jsxs("div",{className:a.avatarBtnswrap,children:[e.jsxs(f,{to:`/user/${n._id}`,className:F(a.avatarWrapper),children:[e.jsx("img",{src:n.avatar||`${E}`,alt:`${n.name} avatar`,className:a.avatar}),e.jsx("span",{children:n.name})]}),e.jsxs("ul",{className:a.iconList,children:[e.jsx("li",{children:N?j?e.jsx(R,{iconId:"icon-heart",onClick:L}):e.jsx(R,{iconId:"icon-heart",onClick:L}):e.jsx(R,{iconId:"icon-heart",onClick:()=>{m(!l)}})}),e.jsx("li",{children:e.jsx(f,{to:`/recipe/${s}`,className:a.iconWrapper,children:e.jsx(z,{iconId:"icon-arrow-up-right"})})})]})]})]}),e.jsxs(T,{isOpen:l,onClose:()=>m(!l),children:[g&&e.jsx(U,{handleClickSignIn:h}),u&&e.jsx(D,{handleClickSignUp:h})]})]})},Ke=({recipes:i})=>{const{data:s}=i;return e.jsxs("ul",{className:O.popular_recipes_list,children:[s.map(({recipe:t})=>e.jsx(ze,{recipe:t},t._id))," "]})},Xe=()=>{const{data:i,isLoading:s}=K();return e.jsxs("section",{className:O.popular_recipes_container,children:[e.jsx("h3",{className:O.header_popular_recipes,children:"Popular recipes"}),s?e.jsx(A,{}):e.jsx(Ke,{recipes:i})]})},Ze="_main_container_jkri4_1",Je={main_container:Ze},es=()=>{const{id:i}=X(),{data:s,isLoading:t}=Z(i);return r.useEffect(()=>{window.scrollTo(0,0)},[i]),e.jsx(e.Fragment,{children:e.jsxs("main",{className:Je.main_container,children:[s&&e.jsx(J,{currentPage:s.data.title}),t?e.jsx(A,{}):e.jsx($e,{recipe:s.data}),e.jsx(Xe,{})]})})};export{es as default};
