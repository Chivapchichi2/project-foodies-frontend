import{j as e,t as O,w as M,v as P,k as v,x as E,r as a,s as T,y as A,z as B,B as m,A as y,C as U,o as G,n as q,R as D,D as Q,E as N,L as R,F as z,G as H}from"./index-CaM8DjJm.js";import{r as K}from"./recipe_without_img-BDzgIXng.js";import{B as W}from"./BreadCrumbs-BURmNG6p.js";const Z="_recipe_info_container_1a2kn_1",J="_recipe_info_wrapper_1a2kn_3",V="_recipe_img_1a2kn_21",u={recipe_info_container:Z,recipe_info_wrapper:J,recipe_img:V},X="_ingredients_item_w1ukj_1",Y="_ingredients_img_w1ukj_15",ee="_ingredients_info_w1ukj_33",se="_ingredients_mesure_w1ukj_49",ie="_ingredients_list_w1ukj_57",re="_ingredients_subtitel_w1ukj_77",o={ingredients_item:X,ingredients_img:Y,ingredients_info:ee,ingredients_mesure:se,ingredients_list:ie,ingredients_subtitel:re},ne="/project-foodies-frontend/assets/ingredient_without_img-DgeLwZWu.jpg",te=({pathImg:s,name:i,mesure:r})=>e.jsxs("li",{className:o.ingredients_item,children:[e.jsx("img",{className:o.ingredients_img,src:s||ne,alt:`${i} image`}),e.jsxs("div",{className:o.ingredients_info,children:[e.jsx("p",{children:i}),e.jsx("p",{className:o.ingredients_mesure,children:r})]})]}),ae=({ingredients:s})=>e.jsx("ul",{className:o.ingredients_list,children:s.map(({ingredient:i,mesure:r})=>e.jsx(te,{pathImg:i.img,name:i.name,mesure:r},i._id))}),oe=({ingredients:s})=>e.jsxs("div",{children:[e.jsx("h3",{className:o.ingredients_subtitel,children:"Ingredients"}),e.jsx(ae,{ingredients:s})]}),ce="_owner_card_1lkyf_1",_e="_owner_photo_1lkyf_11",pe="_owner_sign_1lkyf_23",le="_owner_primary_info_wrapper_1lkyf_35",de="_profile_big_card_icon_1lkyf_53",_={owner_card:ce,owner_photo:_e,owner_sign:pe,owner_primary_info_wrapper:le,profile_big_card_icon:de},me=({owner:s})=>{const{avatarURL:i,name:r,_id:n}=s;return e.jsxs(O,{to:`/user/${n}`,className:_.owner_card,children:[e.jsx("img",{className:_.owner_photo,src:i||M,alt:`${r} photo`}),e.jsxs("div",{className:_.owner_primary_info_wrapper,children:[e.jsx("span",{className:_.owner_sign,children:"Created by:"}),e.jsx("h4",{children:r})]})]})},ue="_tags_list_13jcq_1",ge="_tag_list_item_13jcq_13",I={tags_list:ue,tag_list_item:ge},je=({tagInfo:s})=>e.jsx("li",{className:I.tag_list_item,children:Number(s)?`${s} min`:s}),xe=({tags:s})=>{const i=Object.keys(s);return e.jsx("ul",{className:I.tags_list,children:i.map(r=>e.jsx(je,{tagInfo:s[r]},P()))})},he="_recipe_main_info_wrapper_1uv7g_1",fe="_recipe_header_1uv7g_15",we="_recipe_description_1uv7g_27",g={recipe_main_info_wrapper:he,recipe_header:fe,recipe_description:we},ve=({data:s})=>{const{area:i,category:r,time:n,title:p,description:t,owner:c}=s;return e.jsxs("div",{className:g.recipe_main_info_wrapper,children:[e.jsx("h3",{className:g.recipe_header,children:p}),e.jsx(xe,{tags:{area:i,category:r,time:n}}),e.jsx("p",{className:g.recipe_description,children:t}),e.jsx(me,{owner:c})]})},ye=s=>s.split(`\r
`).filter(i=>i.trim()!=="").map(i=>`<p>${i}</p><br>`).join(""),ke="_recipe_preparation_1hfuv_1",Ne="_instruction_1hfuv_19",k={recipe_preparation:ke,instruction:Ne},Re=({instruction:s})=>e.jsxs("div",{children:[e.jsx("h4",{className:k.recipe_preparation,children:"Recipe Preparation"}),e.jsx("div",{className:k.instruction,dangerouslySetInnerHTML:{__html:ye(s)}})]}),Ie=({recipe:s})=>{const{thumb:i,title:r,instructions:n,ingredients:p,_id:t}=s,c=v(E),[S,l]=a.useState(c.includes(t)),b=v(T),[d,x]=a.useState(!1),[h,C]=a.useState(!0),[f,F]=a.useState(!1),[L]=A(),[$]=B();a.useEffect(()=>{l(c.includes(t))},[c,t]);const w=()=>{F(!f),C(!h)};return e.jsxs("section",{className:u.recipe_info_container,children:[e.jsx("img",{className:u.recipe_img,src:i!=="[object FileList]"?i:K,alt:r}),e.jsxs("div",{className:u.recipe_info_wrapper,children:[e.jsx(ve,{data:s}),e.jsx(oe,{ingredients:p}),e.jsx(Re,{instruction:n}),b?S?e.jsx(m,{text:"Remove from favorites",variant:"add_favorite",onClick:()=>y($,t,"delete",l)}):e.jsx(m,{text:"Add to favorites",variant:"add_favorite",onClick:()=>y(L,t,"add",l)}):e.jsx(m,{text:"Add to favorites",variant:"add_favorite",onClick:()=>{x(!d)}})]}),e.jsxs(U,{isOpen:d,onClose:()=>x(!d),children:[f&&e.jsx(G,{handleClickSignIn:w}),h&&e.jsx(q,{handleClickSignUp:w})]})]})},Se="_header_popular_recipes_cshxa_1",be="_popular_recipes_container_cshxa_17",Ce="_popular_recipes_list_cshxa_33",j={header_popular_recipes:Se,popular_recipes_container:be,popular_recipes_list:Ce},Fe=({recipes:s})=>{const{data:i}=s;return e.jsxs("ul",{className:j.popular_recipes_list,children:[i.map(({recipe:r})=>e.jsx(D,{recipe:r},r._id))," "]})},Le=()=>{const{data:s,isLoading:i,error:r}=Q();return e.jsxs("section",{className:j.popular_recipes_container,children:[r&&e.jsx(N,{to:"/error500",replace:!0}),e.jsx("h3",{className:j.header_popular_recipes,children:"Popular recipes"}),!r&&i?e.jsx(R,{}):e.jsx(Fe,{recipes:s})]})},$e="_main_container_jkri4_1",Oe={main_container:$e},Te=()=>{const{id:s}=z(),{data:i,isLoading:r,error:n}=H(s);return a.useEffect(()=>{window.scrollTo(0,0)},[s]),e.jsxs(e.Fragment,{children:[n&&e.jsx(N,{to:"/error500",replace:!0}),!n&&e.jsxs("main",{className:Oe.main_container,children:[i&&e.jsx(W,{currentPage:i.data.title}),r?e.jsx(R,{}):e.jsx(Ie,{recipe:i.data}),e.jsx(Le,{})]})]})};export{Te as default};
