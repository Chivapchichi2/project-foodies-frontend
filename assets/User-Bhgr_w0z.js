import{j as e,i as h,r as a,T as O,y as A,v as L,A as N,U as S,V as y,W as R,L as U,q as F,B as T,C as P,X as W}from"./index-BHGE9Ffj.js";import{w as j,B}from"./BreadCrumbs-DlLVjrQi.js";import{S as z}from"./SectionTitle-BtJ4igeS.js";const M="_container_1mohz_1",w={container:M},k="_menuContainer_e34x7_1",$="_menuItem_e34x7_27",D="_active_e34x7_69",p={menuContainer:k,menuItem:$,active:D},V=({menuItems:t,activeTab:s,setActiveTab:r})=>e.jsx("div",{className:p.menuContainer,children:t.map(o=>e.jsx("div",{className:`${p.menuItem} ${o.id===s?p.active:""}`,onClick:()=>r(o.id),children:o.label},o.id))}),Y=t=>t.profile.userProfile,g=t=>t.profile.isAuthorizedUser,u=[{id:"my-recipes",label:"MY RECIPES"},{id:"my-favorites",label:"MY FAVORITES"},{id:"followers",label:"FOLLOWERS"},{id:"following",label:"FOLLOWING"}],m=[{id:"recipes",label:"RECIPES"},{id:"followers",label:"FOLLOWERS"}],G=()=>{const t=h(g),[s,r]=a.useState(t?u[0].id:m[0].id);a.useEffect(()=>{r(t?u[0].id:m[0].id)},[t]);const o=()=>{if(t)switch(s){case"my-recipes":return e.jsx("div",{children:"MY RECIPES"});case"my-favorites":return e.jsx("div",{children:"MY FAVORITES"});case"followers":return e.jsx("div",{children:"FOLLOWERS"});case"following":return e.jsx("div",{children:"FOLLOWING"});default:return null}else switch(s){case"recipes":return e.jsx("div",{children:"RECIPES"});case"followers":return e.jsx("div",{children:"FOLLOWERS"});default:return null}},c=t?u:m;return e.jsxs("div",{className:w.container,children:[e.jsx(V,{menuItems:c,activeTab:s,setActiveTab:r}),e.jsx("div",{className:w.content,children:o()})]})},q="_container_1ivx6_1",Q="_breadscrumbs_1ivx6_9",X="_title_1ivx6_17",H="_subtitle_1ivx6_23",J="_userInfoAndBtnWrapper_1ivx6_41",Z="_userInfoAndTabContentWerapper_1ivx6_111",d={container:q,breadscrumbs:Q,title:X,subtitle:H,userInfoAndBtnWrapper:J,userInfoAndTabContentWerapper:Z},K="_profile_card_wrapper_hmtns_1",ee="_profile_card_hmtns_1",re="_profile_name_hmtns_41",te="_profile_card_info_hmtns_59",se="_profile_info_item_hmtns_73",ne="_profile_info_content_hmtns_93",oe="_profile_big_card_button_hmtns_109",ie="_profile_big_card_icon_hmtns_127",ae="_profile_photo_hmtns_135",i={profile_card_wrapper:K,profile_card:ee,profile_name:re,profile_card_info:te,profile_info_item:se,profile_info_content:ne,profile_big_card_button:oe,profile_big_card_icon:ie,profile_photo:ae},ce=t=>t.charAt(0).toUpperCase()+t.slice(1),le=({name:t,value:s})=>{const r={email:"email",createdRecipesCount:"added recipes",favoriteRecipesCount:"favorites",followersCount:"followers",followingCount:"following"};return e.jsxs("li",{className:i.profile_info_item,children:[ce(r[t]),":",e.jsx("span",{className:i.profile_info_content,children:s})]})},_e=()=>{const t=h(g),[s]=O(),r=h(Y),o=r?Object.keys(r):[],[c,f]=a.useState((r==null?void 0:r.avatar)||j),C=async n=>{const l=new FormData;l.append("avatar",n);try{const _=await s(l).unwrap();f(_.avatarURL)}catch(_){console.error("Error updating avatar:",_)}},I=n=>{const l=n.target.files[0];if(l){const _=new FileReader;_.onload=()=>{C(l)},_.readAsDataURL(l)}},v=a.useRef(null),[x,b]=a.useState({width:16,height:16}),E=()=>{v.current.click()};return a.useEffect(()=>{f((r==null?void 0:r.avatar)||j)},[r==null?void 0:r.avatar]),a.useEffect(()=>{const n=()=>{window.matchMedia("(max-width: 768px)").matches?b({width:16,height:16}):b({width:18,height:18})};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[]),e.jsx("div",{className:i.profile_card_wrapper,children:e.jsxs("div",{className:i.profile_card,children:[e.jsx("img",{className:i.profile_photo,src:c,alt:`${(r==null?void 0:r.name)||"User Name"} avatar`}),t&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"file",ref:v,style:{display:"none"},onChange:I}),e.jsx(A,{iconId:"icon-plus",style:i.profile_big_card_button,styleSVG:i.profile_big_card_icon,stroke:"#FFF",width:x.width,height:x.height,onClick:E})]}),e.jsx("h3",{className:i.profile_name,children:r==null?void 0:r.name}),e.jsx("ul",{className:i.profile_info,children:o.map(n=>{if(!(n==="_id"||n==="name"||n==="avatar"))return e.jsx(le,{name:n,value:r[n]},L())})})]})})},ue=()=>{const[t,s]=a.useState(!1),{id:r}=N(),o=S(),{data:c,error:f}=y(r);if(a.useEffect(()=>{c&&o(R(c))},[c,o]),profileLoading)return e.jsx(U,{});if(f){F.error(f.data.message,{position:"top-right"});return}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:d.container,children:[e.jsx("div",{className:d.breadscrumbs,children:e.jsx(B,{currentPage:"Profile"})}),e.jsx("div",{className:d.title,children:e.jsx(z,{text:"Profile"})}),e.jsxs("p",{className:d.subtitle,children:["Reveal your culinary art, share your favorite recipe and create ",e.jsx("br",{}),"gastronomic masterpieces with us."]}),e.jsxs("div",{className:d.userInfoAndTabContentWerapper,children:[e.jsxs("div",{className:d.userInfoAndBtnWrapper,children:[e.jsx(_e,{}),e.jsx(T,{type:"button",variant:"logOutBtn",text:"Log Out",onClick:()=>s(!0)})]}),e.jsx(G,{})]})]}),e.jsx(P,{isOpen:t,onClose:()=>s(!1),children:e.jsx(W,{setModalLogOutOpen:s})})]})};export{ue as default};
